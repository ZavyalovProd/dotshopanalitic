<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOT SHOP ¬∑ Analytics</title>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div class="loader-screen" id="loader-screen">
        <div class="loader-content">
            <div class="loader-animation">
                <svg class="loader-ring" viewBox="0 0 100 100">
                    <defs>
                        <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#ff9d5c"/>
                            <stop offset="100%" style="stop-color:#ff7b3a"/>
                        </linearGradient>
                    </defs>
                    <circle class="ring-bg" cx="50" cy="50" r="45"/>
                    <circle class="ring-progress" cx="50" cy="50" r="45"/>
                </svg>
                <div class="loader-icon">
                    <div class="icon-circle"></div>
                    <div class="icon-line"></div>
                </div>
            </div>
            <div class="loader-text">
                <div class="loader-brand">DOT<span>.</span></div>
                <p class="loader-status" id="loader-status">Initializing...</p>
            </div>
        </div>
    </div>

    <!-- Login Screen -->
    <div class="login-screen" id="login-screen">
        <div class="login-card">
            <div class="login-logo">DOT<span>.</span></div>
            <p class="login-subtitle">Analytics Dashboard</p>
            
            <!-- Token Login -->
            <div class="login-form" id="token-login-form">
                <input type="password" id="token-input" class="login-input" placeholder="Enter access token">
                <button id="login-btn" class="login-btn primary">Access Dashboard</button>
                <div class="login-divider"><span>or</span></div>
                <button id="admin-login-btn" class="login-btn secondary">Admin Login</button>
            </div>
            
            <!-- Admin Password Only -->
            <div class="login-form hidden" id="admin-password-form">
                <p class="form-title">üîê Admin Authentication</p>
                <input type="password" id="admin-password" class="login-input" placeholder="Enter admin password">
                <button id="request-code-btn" class="login-btn admin">Send Code to Email</button>
                <button id="back-to-token" class="back-btn">‚Üê Back to token login</button>
            </div>
            
            <!-- Code Verification -->
            <div class="login-form hidden" id="code-verify-form">
                <p class="form-title">üìß Check your email</p>
                <p class="form-subtitle">Code sent to IlyaZav200@gmail.com</p>
                <input type="text" id="code-input" class="login-input code" placeholder="‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢" maxlength="10">
                <button id="verify-code-btn" class="login-btn admin">Verify & Login</button>
                <button id="back-to-password" class="back-btn">‚Üê Back</button>
            </div>
            
            <p class="login-error" id="login-error"></p>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="dashboard" id="dashboard">
        <div class="sidebar" id="sidebar">
            <div class="logo">DOT<span>.</span></div>
            <nav>
                <a href="#" class="nav-item active" data-section="overview">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                    <span>Overview</span>
                </a>
                <a href="#" class="nav-item" data-section="reviews">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                    <span>Reviews</span>
                </a>
                <a href="#" class="nav-item admin-only hidden" data-section="admin">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                    <span>Admin</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="connection-status" id="connection-status">
                    <div class="status-dot offline"></div>
                    <span>Offline</span>
                </div>
                <button class="logout-btn" id="logout-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                </button>
            </div>
        </div>

        <div class="overlay" id="overlay"></div>
        <button class="mobile-menu-btn" id="mobile-menu-btn">‚ò∞</button>

        <main class="main">
            <!-- Overview -->
            <section class="section active" id="section-overview">
                <header class="header">
                    <div class="header-left">
                        <h1>Analytics</h1>
                        <p class="last-update" id="last-update">Last update: --:--</p>
                    </div>
                    <div class="period-selector">
                        <button class="period-btn" data-period="today">Today</button>
                        <button class="period-btn active" data-period="week">Week</button>
                        <button class="period-btn" data-period="month">Month</button>
                        <button class="period-btn" data-period="year">Year</button>
                        <button class="period-btn" data-period="all">All</button>
                    </div>
                </header>

                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-icon blue">üì¶</div><div class="stat-info"><span class="stat-label">Orders</span><span class="stat-value" id="total-orders">-</span></div></div>
                    <div class="stat-card"><div class="stat-icon yellow">‚≠ê</div><div class="stat-info"><span class="stat-label">Reviews</span><span class="stat-value" id="total-reviews">-</span></div></div>
                    <div class="stat-card"><div class="stat-icon green">üë•</div><div class="stat-info"><span class="stat-label">Buyers</span><span class="stat-value" id="unique-buyers">-</span></div></div>
                    <div class="stat-card highlight"><div class="stat-icon orange">üí∞</div><div class="stat-info"><span class="stat-label">Revenue</span><span class="stat-value" id="total-revenue">-</span></div></div>
                </div>

                <div class="cards-row">
                    <div class="card">
                        <h3>Revenue by Currency</h3>
                        <div class="currency-list">
                            <div class="currency-item"><span>üá™üá∫ EUR</span><span class="currency-value" id="revenue-eur">‚Ç¨0.00</span></div>
                            <div class="currency-item"><span>üá∫üá∏ USD</span><span class="currency-value" id="revenue-usd">$0.00</span></div>
                            <div class="currency-item"><span>üá∑üá∫ RUB</span><span class="currency-value" id="revenue-rub">‚ÇΩ0</span></div>
                        </div>
                    </div>
                    <div class="card tabs-card">
                        <div class="tabs-header">
                            <button class="tab-btn active" data-tab="payments">Payments</button>
                            <button class="tab-btn" data-tab="products">Top Products</button>
                            <button class="tab-btn" data-tab="buyers">Top Buyers</button>
                        </div>
                        <div class="tab-content active" id="tab-payments"><div id="payment-methods" class="list-content"></div></div>
                        <div class="tab-content" id="tab-products"><div id="top-products" class="list-content"></div></div>
                        <div class="tab-content" id="tab-buyers"><div id="top-buyers" class="list-content"></div></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header"><h3>Recent Orders</h3><span class="badge" id="orders-count">0 orders</span></div>
                    <div class="table-wrapper">
                        <table>
                            <thead><tr><th>#</th><th>Buyer</th><th class="hide-mobile">Items</th><th>Payment</th><th>Total</th><th class="hide-mobile">Date</th><th></th></tr></thead>
                            <tbody id="orders-table"><tr><td colspan="7" class="no-data">Loading...</td></tr></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Reviews -->
            <section class="section" id="section-reviews">
                <header class="header"><h1>Reviews</h1></header>
                <div class="reviews-grid">
                    <div class="stat-card"><div class="stat-icon yellow">‚≠ê</div><div class="stat-info"><span class="stat-label">Total Reviews</span><span class="stat-value" id="reviews-total">-</span></div></div>
                    <div class="stat-card"><div class="stat-icon yellow">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div><div class="stat-info"><span class="stat-label">Average Rating</span><span class="stat-value">5.0</span></div></div>
                </div>
                <div class="card">
                    <h3>About Our Reviews</h3>
                    <p>All reviews are from verified customers after successful deliveries.</p>
                    <div class="features"><span>‚úì Verified</span><span>‚úì Real Customers</span><span>‚úì Authentic</span></div>
                </div>
                <a href="https://discord.com/channels/1440679410616578152/1440808658903629935" target="_blank" class="discord-btn">
                    <span>üì±</span> View Reviews on Discord
                </a>
            </section>

            <!-- Admin -->
            <section class="section" id="section-admin">
                <header class="header"><h1>Admin Panel</h1></header>
                <div class="admin-grid">
                    <div class="card admin-card">
                        <h3>üîë Create Token</h3>
                        <input type="text" id="new-token-name" class="admin-input" placeholder="Token name">
                        <input type="number" id="new-token-uses" class="admin-input" placeholder="Max uses (-1 = unlimited)" value="-1">
                        <button id="create-token-btn" class="admin-btn">Create</button>
                        <div class="token-result hidden" id="token-result">
                            <p>Token created (copy now!):</p>
                            <code id="new-token-value"></code>
                            <button id="copy-token-btn" class="copy-btn">Copy</button>
                        </div>
                    </div>
                    <div class="card admin-card">
                        <h3>üìã Active Tokens</h3>
                        <div id="tokens-list" class="admin-list"></div>
                    </div>
                    <div class="card admin-card wide">
                        <h3>üîê Login Logs</h3>
                        <div id="login-logs" class="admin-list logs"></div>
                    </div>
                    <div class="card admin-card wide">
                        <h3>ü§ñ Bot Logs</h3>
                        <div id="bot-logs" class="admin-list logs"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="order-modal">
        <div class="modal">
            <button class="modal-close" id="modal-close">√ó</button>
            <div id="modal-content"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
